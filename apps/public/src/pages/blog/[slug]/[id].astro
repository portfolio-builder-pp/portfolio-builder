---
import BaseLayout from 'apps/public/src/layouts/BaseLayout.astro';
import { TRPCClient } from '../../../client';
import { slugify } from '../../../utils';

export async function getStaticPaths() {
  const blogPosts = await TRPCClient.blogPost.findAll.query();
  return blogPosts.map(post => ({ params: {slug: slugify(post.title), id: post.id}, props: { post }}))
}

const { post } = Astro.props;
---
<BaseLayout title={post.title} description={post.content}>
  <div>
    <h1>{post.title}</h1>
    <p>{post.content}</p>
    <div>{post.createdAt}</div>
  </div>
</BaseLayout>
